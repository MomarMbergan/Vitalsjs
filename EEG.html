Do it like this script <!DOCTYPE html>
<html>
<head>
  <title>SkyNet Biometric Dashboard</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <!-- styles omitted for brevity, same as previous version -->
</head>
<body>

<video id="camera" autoplay muted playsinline></video>
<canvas id="overlay"></canvas>

<div id="statusBadge">Analyzing</div>
<button id="flipCameraBtn">Flip Camera</button>

<div id="togglePanel">
  <button class="icon-btn" id="btnThermal" title="Toggle thermal view">ğŸŒ¡ï¸</button>
  <button class="icon-btn" id="btnEEG" title="Toggle EEG thermal">ğŸ§ </button>
  <button class="icon-btn" id="btnAnnotations" title="Toggle annotations">âœ³ï¸</button>
  <button class="icon-btn" id="btnSpectra" title="Toggle spectra">ğŸ“ˆ</button>
  <button class="icon-btn" id="btnSnapshot" title="Capture snapshot">ğŸ“¸</button>
</div>
<div id="panelHandle">â€º</div>

<div id="dashboardWrap">
  <div class="dashboard">
    <div class="panel"><h3>Heart Rate</h3><canvas id="rppgChart" class="chart"></canvas><div class="colorbar"></div></div>
    <div class="panel"><h3>EEG</h3><canvas id="eegChart" class="chart"></canvas><div class="colorbar"></div></div>
    <div class="panel"><h3>rPPG</h3><canvas id="rppgFFT" class="chart"></canvas></div>
    <div class="panel">
      <h3>Fusion</h3>
      <div id="fusionOutput">
        <div id="freqFusion">1. Frequency-Domain Fusion: 0 Hz</div>
        <div id="peakFusion">2. Peak-Based Fusion: 0 Hz</div>
        <div id="coherenceFusion">3. Cross-Spectral Coherence: 0</div>
      </div>
      <div id="fusionEq">
        $$F{\text{fusion}}(f) = \text{FFT}{\text{EEG}}(f) + \text{FFT}{\text{rPPG}}(f) + \text{FFT}{\text{HR}}(f)$$
      </div>
    </div>
    <div class="panel"><h3>CPU/GPU</h3><canvas id="sysFlow" class="chart"></canvas></div>
  </div>
</div>

<div class="footer">
  <div class="sliders">
    <div class="slider-wrap" title="Smoothing"><div class="label">ğŸšï¸</div><input type="range" id="smoothing" min="0" max="1" step="0.1" value="0.5"></div>
    <div class="slider-wrap" title="FFT window size"><div class="label">ğŸª„</div><input type="range" id="fftWindow" min="128" max="1024" step="128" value="512"></div>
    <div class="slider-wrap" title="Amplitude scale"><div class="label">ğŸ”Š</div><input type="range" id="ampScale" min="1" max="5" step="0.5" value="1"></div>
  </div>
  <div class="right"><div id="countdown" title="Auto-save snapshot countdown">Next auto-save: 60s</div></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script>
// ... all detection, chart, fusion, and PCAP code same as previous version ...

// âœ… Screenshot fix: capture full dashboard including all charts + LaTeX
async function captureDashboardPNG(customName=null){
  const target = document.getElementById('dashboardWrap');
  const canvas = await html2canvas(target, {
    useCORS: true,
    logging: false,
    scale: 1,
    scrollY: -window.scrollY,
    windowWidth: document.documentElement.scrollWidth,
    windowHeight: document.documentElement.scrollHeight
  });
  const link=document.createElement('a');
  const fname=customName || dashboard_${new Date().toISOString().replace(/[:.]/g,'-')}.png;
  link.download=fname;
  link.href=canvas.toDataURL('image/png');
  link.click();
}

// âœ… PCAP payload already includes:
// - Fusion metrics
// - Multi-face IDs, bounding boxes, eyes, pixel arrays
// - Device metadata
// - CPU/GPU metrics

</script>
</body>
</html>
