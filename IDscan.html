<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>SkyNet Biometric Dashboard</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Astro Font -->
<link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet"/>

<!-- MathJax -->
<script>
window.MathJax = {
  tex: { inlineMath: [["\\(","\\)"],["$", "$"]] },
  svg: { fontCache: "global" }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<!-- Chart.js (unchanged UI; defaults configured in script) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<!-- Face API (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>

<style>
  body{
    margin:0;
    background:#000;
    color:#6cf;
    font-family:'Audiowide', sans-serif;
  }
  #container{
    width:100vw; height:100vh;
    display:flex; flex-direction:column;
    align-items:center; justify-content:flex-start;
  }
  video{
    width:320px; height:auto;
    border:2px solid #0af;
    border-radius:12px;
    margin-top:10px;
  }
  canvas{
    position:absolute; left:0; top:0;
    pointer-events:none;
  }

  #metrics{
    margin-top:10px;
    width:90%;
    color:#8cf;
    font-size:14px;
    text-shadow:0 0 8px #0af;
  }

  .eq{
    margin-top:6px;
    padding:6px;
    background:rgba(0,60,120,0.18);
    border-radius:12px;
    border:1px solid rgba(0,140,255,0.4);
  }

  /* Alluvial SVG matches UI aesthetic, no layout changes */
  #alluvialSVG{
    width:90%;
    height:200px;
    margin-top:10px;
    filter: drop-shadow(0 0 6px rgba(0,140,255,0.35));
  }
</style>

</head>
<body>
<div id="container">

  <!-- Front Camera -->
  <video id="camFront" autoplay muted playsinline></video>
  <canvas id="frontOverlay" width="320" height="240"></canvas>

  <!-- Rear Camera -->
  <video id="camRear" autoplay muted playsinline></video>
  <canvas id="rearOverlay" width="320" height="240"></canvas>

  <!-- HUD Metrics (UI unchanged) -->
  <div id="metrics">
    <div>HR Front: <span id="hrFront">60</span> bpm</div>
    <div>HR Rear: <span id="hrRear">60</span> bpm</div>
    <div>PPG: <span id="ppgValue">1</span></div>
    <div>SpOâ‚‚: <span id="spo2Value">98</span>%</div>

    <!-- NEW METRIC BLOCK (below SpO2), divided by live PPG -->
    <div id="equationsBlock" class="eq">
      <strong>Eye Metrics (normalized / PPG):</strong>

      <div id="eqGamma">\( \gamma = \frac{I_{max}}{I_{min}} \div PPG \)</div>
      <div id="eqP">\( P = \frac{TP}{TP+FP} \div PPG \)</div>
      <div id="eqDepth">\( \sqrt{D^2 - d^2} \div PPG \)</div>
      <div id="eqHRN">\( \text{NormHR} = \frac{Metric}{HR} \div PPG \)</div>
      <div id="eqLens">\( \frac{1}{f} = \frac{1}{u} + \frac{1}{v} \div PPG \)</div>
      <div id="eqInvSq">\( L \propto \frac{1}{d^2} \div PPG \)</div>
    </div>
